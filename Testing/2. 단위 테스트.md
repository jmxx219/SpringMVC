## 단위 테스트(Unit Test)

> 자동화된 테스트 기법  
>  - 단위 테스트  
>  - 통합 테스트  
>  - 인수 테스트  
  
  
### 단위 테스트 
- **작은** 코드 단위를 **독립적**으로 검증하는 테스트
  - 작은 코드 단위: 클래스 or 메서드 단위
- 외부에 의존하지 않기 때문에 검증 속도가 빠르고 안정적이다.

<br/>

#### JUnit5
- XUnit: 단위 테스트를 위한 테스트 프레임워크
  - Java에서는 `JUnit`, .Net에서는 Nunit 등등

<br/>

#### AssertJ

- 테스트 코드 작성을 원활하게 돕는 테스트 라이브러리
- 풍부한 API 및 메서드 체이닝 지원



<br>

### 테스트 케이스 세분화하기

- `한 종류의 음료 여러 잔을 한 번에 담는 기능` 요구 사항 추가 되었을 때 항상 자신에게 혹은 기획자 또는 디자이너에게 질문을 할 수 있어야 한다.
  - 질문하기: 이 요구사항이 실제 내가 구현할 때 그 요구사항과 정획히 맞아떨어지는가? 암무적이거나 아직 드러나지 않은 요구사항이 있는가?
  - 위의 요구사항은 해피케이스에 대한 내용만 존재하고, 예외 케이스에 대한 요구사항은 나와있지 않다(암묵적이다).
- 테스트 케이스를 세분화하고, 경계값이 존재하면 **경계값**에서 테스트를 하는 것이 중요하다.
  - `해피 케이스(요구사항을 그대로 만족하는 테스트 케이스)`, `예외 케이스(그 외 케이스)`
  - 이런 케이스들을 테스트할 때는 `경계값 테스트`가 중요하다.
    - 경계값 테스트: 범위(이상, 이하, 초과, 미만), 구간, 날짜 등

<br>

### 테스트하기 어려운 영역을 구분하고 분리하기

- `가게 운영 시간(10:00 ~ 22:00)외에는 주문을 생성할 수 없다`가 요구 사항에 추가 되었을 때
  - 주문을 생성하는 함수 안에서 현재 시간을 받아온다면, 해당 기능에 대한 테스트 코드는 테스트를 수행하는 시간에 따라 결과가 다르게 나온다.
- `현재 시간`이 테스트를 어렵게 만드는 요소로 파악된다면, 현재 시간을 파라미터로 받아오도록 수정해보자
  - 파라미터에 테스트하고자 하는 시간(가게 오픈 시간의 경계값)을 넣음으로써 언제든지 원하는 테스트를 수행할 수 있다.
- 결국 테스트하기 어려운 영역을 외부로 분리(파라미터로 받기)하자
  - 외부로 분리할수록 테스트 가능한 코드는 많아진다.

> 테스트하고자 하는 것은 **어떤 시간이 주어졌을 때, 시간 범위 안에 이 시간이 들어오는 것이 중요한 것**이지 현재 시간이 중요한 것은 아니다. 따라서 테스트 코드 상에서 원하는 값을 넣어줄 수 있도록 설계를 변경하는 것이 중요하다.

<br>

#### 테스트하기 어려운 영역

- 관측할 때마다 다른 값에 의존하는 코드 -> input 역할
  - 현재 날짜/시간, 랜덤 값, 전역 변수/함수, 사용자 입력 등
- 외부 세계에 영향을 주는 코드 -> output 역할
  - 표준 출력, 메시지 발송, 데이터베이스에 기록하기 등

<br>

#### 테스트하기 쉬운 영역(순수함수)

- 같은 입력에는 항상 같은 결과
- 외부 세상과 단절된 형태
- 테스트하기 쉬운 코드


